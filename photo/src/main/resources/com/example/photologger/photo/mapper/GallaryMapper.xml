<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.photologger.photo.mapper.GallaryMapper">

  <resultMap type="com.example.photologger.photo.domain.Gallary"
    id="GalleryInfo" >
    <result property="gallaryId" column="gallary_id"/>
    <result property="idx" column="idx"/>
    <result property="gallaryAdress" column="gallary_adress"/>
    <result property="gallaryTime" column="gallary_time"/>
    <result property="gallarySeseon" column="gallary_seseon"/>
    <result property="gallaryName" column="gallary_name"/>
    <result property="gallaryDireactionX" column="gallary_direaction_x"/>
    <result property="gallaryImageLocation" column="gallary_image_location"/>
    <result property="gallarySubscribeCount" column="gallary_subscibe_count"/>
    <result property="gallaryDireactionY" column="gallary_direaction_y"/>
    <result property="gallaryViews" column="gallary_views"/>
  </resultMap>

  <insert id="gallaryinfosave" parameterType="com.example.photologger.photo.domain.Gallary">
    INSERT INTO gallary (
      gallery_id,
      idx,
      gallery_adress,
      gallery_time,
      gallery_seseon,
      gallery_direaction_x,
      gallery_name,
      gallery_image_location,
      gallery_subscibe_count,
      gallery_direaction_y,
      gallery_views
    )
    VALUES (
             #{gallryId},
             #{idx},
             #{gallaryAdress},
             #{gallaryTime},
             #{gallarySeseon},
             #{gallaryDireactionX},
             #{gallaryName},
             #{gallaryImageLocation},
             #{gallarySubscribeCount},
             #{gallaryDireactionY},
             #{gallaryViews}
             )
  </insert>

  <update id="updateProfileLocation">
    UPDATE user
    SET profile_Image_location = #{profileImageLocation},
        nick_name = #{nickName},
        password = #{password}
    WHERE idx  = #{idx}
  </update>

  <select id="gallaryLookUp" resultMap="GalleryInfo" >
    SELECT *
    FROM gallary
    WHERE gallary_id = #{gallaryId}
  </select>

  <update id= "galleryViewCount">
    UPDATE gallary
    SET gallary_views = gallary_views + 1
    WHERE gallary_id = #{gllaryId}
  </update>

</mapper>
